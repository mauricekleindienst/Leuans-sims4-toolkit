<Window x:Class="ModernDesign.MVVM.View.VaultAccessPopupWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Leuan's Vault Access" 
        Height="550" 
        Width="650"
        MinHeight="400"
        MinWidth="500"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="CanResizeWithGrip"
        WindowStartupLocation="CenterOwner">

    <Window.Resources>
        <!-- Primary Button Style -->
        <Style x:Key="PrimaryButton" TargetType="Button">
            <Setter Property="Background" Value="#FF5E5E"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Padding" Value="30,12"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="10"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#E04E4E"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Link Button Style -->
        <Style x:Key="LinkButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#60A5FA"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <TextBlock Text="{TemplateBinding Content}"
                                   Foreground="{TemplateBinding Foreground}"
                                   TextDecorations="Underline"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Foreground" Value="#3B82F6"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Close Button Style -->
        <Style x:Key="CloseButton" TargetType="Button">
            <Setter Property="Background" Value="#6B7280"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Padding" Value="20,8"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#4B5563"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Border Background="#1E293B" CornerRadius="20" MouseLeftButtonDown="Border_MouseDown">
        <Border.Effect>
            <DropShadowEffect BlurRadius="40" ShadowDepth="0" Opacity="0.8" Color="Black"/>
        </Border.Effect>

        <Grid x:Name="MainGrid">
            <!-- CLOSE BUTTON (Top Right) -->
            <Button x:Name="TopCloseBtn"
                Content="❌"
                FontSize="20"
                Width="40"
                Height="40"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"
                Margin="10"
                Style="{StaticResource CloseButton}"
                Click="CloseBtn_Click"
                Panel.ZIndex="999" BorderBrush="#FFFF0A0A" Background="#FFDA4444" Opacity="0.2"/>
            <!-- FIRST POPUP (Initial Warning) -->
            <StackPanel x:Name="FirstPopupPanel" Margin="60,60,60,40">
                <!-- Icon -->
                <TextBlock Text="🔒"
                           FontSize="64"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,20"/>

                <!-- Title -->
                <TextBlock x:Name="FirstPopupTitle"
                           Text="External Content Detected"
                           FontSize="28"
                           FontWeight="Bold"
                           Foreground="White"
                           HorizontalAlignment="Center"
                           TextAlignment="Center"
                           Margin="0,0,0,20"/>

                <!-- Message -->
                <TextBlock x:Name="FirstPopupMessage"
                           TextWrapping="Wrap"
                           FontSize="14"
                           Foreground="#CBD5E1"
                           HorizontalAlignment="Center"
                           TextAlignment="Center"
                           LineHeight="24"
                           Margin="0,0,0,30">
                    <Run Text="Woops! It looks like this is outside the scope of the Sims 4 ToolKit. As a non-Sims title, this content is hosted exclusively in our high-speed private repository: "/><Run Text="'Leuan's Vault'" FontWeight="Bold" Foreground="#60A5FA"/><Run Text="."/>
                    <LineBreak/><LineBreak/>
                    <Run Text="To ensure the security and download speed of these large files, the automatic Download for this game is currently for users who have access to Leuan's Vault. However, you can find the free manual download for this Game on our Discord."/>
                </TextBlock>

                <!-- Link Button -->
                <Button x:Name="LearnMoreBtn"
                        Content="➔ How do I get access to Leuan's Vault?"
                        Style="{StaticResource LinkButton}"
                        HorizontalAlignment="Center"
                        Click="LearnMoreBtn_Click"
                        Margin="0,0,0,30"/>

                <!-- Close Button -->
                <Button x:Name="CloseFirstPopupBtn"
                        Content="Close"
                        Style="{StaticResource CloseButton}"
                        HorizontalAlignment="Center"
                        Click="CloseBtn_Click"/>
            </StackPanel>

            <!-- SECOND POPUP (Detailed Explanation) -->
            <ScrollViewer x:Name="SecondPopupPanel" 
              Visibility="Collapsed"
              VerticalScrollBarVisibility="Hidden"
              Padding="60,60,60,40">
                <StackPanel>
                    <!-- Icon -->
                    <TextBlock Text="🏛️"
                               FontSize="64"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,20"/>

                    <!-- Title -->
                    <TextBlock x:Name="SecondPopupTitle"
                               Text="About Leuan's Vault"
                               FontSize="28"
                               FontWeight="Bold"
                               Foreground="White"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,20"/>

                    <!-- Description -->
                    <TextBlock x:Name="SecondPopupDescription"
                               TextWrapping="Wrap"
                               FontSize="14"
                               Foreground="#CBD5E1"
                               LineHeight="24"
                               Margin="0,0,0,20">
                        <Run Text="Leuan's Vault is a private digital preservation library where we manage libraries and external software with a simplified installation system (2-clicks)."/>
                    </TextBlock>

                    <!-- How to Enter Section -->
                    <TextBlock Text="How to Enter?"
                               FontSize="20"
                               FontWeight="Bold"
                               Foreground="White"
                               Margin="0,20,0,15"/>

                    <StackPanel Margin="20,0,0,0">
                        <TextBlock TextWrapping="Wrap"
                                   FontSize="14"
                                   Foreground="#CBD5E1"
                                   LineHeight="24"
                                   Margin="0,0,0,10">
                            <Run Text="1. " FontWeight="Bold" Foreground="#60A5FA"/>
                            <Run Text="Support the project: "/><Run Text="Join the 'Ultra Supporter' tier on our Ko-fi. Your contribution directly funds high-speed servers and repository maintenance." FontWeight="SemiBold"/>
                        </TextBlock>

                        <TextBlock TextWrapping="Wrap"
                                   FontSize="14"
                                   Foreground="#CBD5E1"
                                   LineHeight="24"
                                   Margin="0,0,0,10">
                            <Run Text="2. " FontWeight="Bold" Foreground="#60A5FA"/>
                            <Run Text="Get your credential: "/><Run Text="Upon subscription, you'll receive a special role on our Discord." FontWeight="SemiBold"/>
                        </TextBlock>

                        <TextBlock TextWrapping="Wrap"
                                   FontSize="14"
                                   Foreground="#CBD5E1"
                                   LineHeight="24"
                                   Margin="0,0,0,10">
                            <Run Text="3. " FontWeight="Bold" Foreground="#60A5FA"/>
                            <Run Text="Automatic Unlock: "/><Run Text="Once verified in Discord with our bot, you'll get access to Leuan's Vault." FontWeight="SemiBold"/>
                        </TextBlock>
                    </StackPanel>

                    <TextBlock TextWrapping="Wrap"
                               FontSize="14"
                               Foreground="#94A3B8"
                               FontStyle="Italic"
                               LineHeight="24"
                               Margin="0,20,0,30"
                               TextAlignment="Center">
                        <Run Text="By joining, you not only get access to games, but ensure we can continue researching and adding new titles every week."/>
                    </TextBlock>

                    <!-- Ko-fi Button -->
                    <Button x:Name="KofiBtn"
                            Content="☕ Go to Ko-fi and Become Ultra Supporter"
                            Style="{StaticResource PrimaryButton}"
                            HorizontalAlignment="Center"
                            Click="KofiBtn_Click"
                            Margin="0,0,0,20"/>

                    <!-- Back Button -->
                    <!-- Back Button -->
                    <Button x:Name="BackBtn"
        Content="← Back"
        Background="#6B7280"
        Foreground="White"
        FontSize="14"
        Padding="20,8"
        BorderThickness="0"
        Cursor="Hand"
        HorizontalAlignment="Center"
        Click="BackBtn_Click">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}"
                    CornerRadius="8"
                    Padding="{TemplateBinding Padding}">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                        <Button.Style>
                            <Style TargetType="Button">
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#4B5563"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </StackPanel>
            </ScrollViewer>
        </Grid>
    </Border>
</Window>