<Window x:Class="ModernDesign.MVVM.View.DLCSelectorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="DLC Selector" 
        Height="498" Width="748"
        MinHeight="600" MinWidth="800"
        WindowStyle="None"
        ResizeMode="CanResizeWithGrip"
        AllowsTransparency="True"
        Background="Transparent"
        WindowStartupLocation="CenterOwner">

    <Border x:Name="MainBorder" CornerRadius="12" MouseLeftButtonDown="MainBorder_MouseLeftButtonDown">
        <Border.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#0F172A" Offset="0"/>
                <GradientStop Color="#1E293B" Offset="1"/>
            </LinearGradientBrush>
        </Border.Background>
        <Border.Effect>
            <DropShadowEffect BlurRadius="30" ShadowDepth="0" Opacity="0.6"/>
        </Border.Effect>

        <Grid Margin="25">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <StackPanel Grid.Row="0" Margin="0,0,0,15">
                <TextBlock x:Name="HeaderText" 
                           Text="⚙️ Selecciona los DLCs a Escanear" 
                           Foreground="White" 
                           FontSize="22" 
                           FontWeight="Bold"
                           TextWrapping="Wrap"/>
                <TextBlock x:Name="SubHeaderText" 
                           Text="Haz clic en las portadas para incluir o excluir del escaneo" 
                           Foreground="#94A3B8" 
                           FontSize="12" 
                           Margin="0,6,0,0"
                           TextWrapping="Wrap"/>
            </StackPanel>

            <!-- Search Bar -->
            <Border Grid.Row="1" Background="#15FFFFFF" CornerRadius="10" Padding="12,10" Margin="0,0,0,15">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Text="🔍" FontSize="16" VerticalAlignment="Center" Margin="0,0,8,0"/>

                    <Grid Grid.Column="1">
                        <TextBlock x:Name="SearchPlaceholder" 
                       Text="Buscar DLC por nombre o código..." 
                       Foreground="#64748B" 
                       FontSize="13"
                       VerticalAlignment="Center"
                       IsHitTestVisible="False"
                       Visibility="Visible"/>

                        <TextBox x:Name="SearchBox"
                     Background="Transparent"
                     BorderThickness="0"
                     Foreground="White"
                     FontSize="13"
                     VerticalAlignment="Center"
                     TextChanged="SearchBox_TextChanged"/>
                    </Grid>
                </Grid>
            </Border>

            <!-- Quick Actions -->
            <Border Grid.Row="2" Background="#10FFFFFF" CornerRadius="8" Padding="12" Margin="0,0,0,15">
                <WrapPanel HorizontalAlignment="Center">
                    <Button x:Name="SelectAllBtn" Content="✓ Seleccionar Todo" 
                            Padding="12,8" Margin="5" Cursor="Hand"
                            Background="#22C55E" Foreground="White" FontWeight="SemiBold" FontSize="11"
                            Click="SelectAllBtn_Click">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="bg" Background="{TemplateBinding Background}" CornerRadius="8" Padding="{TemplateBinding Padding}">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="bg" Property="Background" Value="#16A34A"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <Button x:Name="DeselectAllBtn" Content="✗ Deseleccionar Todo" 
                            Padding="12,8" Margin="5" Cursor="Hand"
                            Background="#EF4444" Foreground="White" FontWeight="SemiBold" FontSize="11"
                            Click="DeselectAllBtn_Click">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="bg" Background="{TemplateBinding Background}" CornerRadius="8" Padding="{TemplateBinding Padding}">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="bg" Property="Background" Value="#DC2626"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </WrapPanel>
            </Border>

            <!-- DLC Categories (Netflix Style) -->
            <ScrollViewer Grid.Row="3" VerticalScrollBarVisibility="Auto">
                <StackPanel x:Name="CategoriesPanel">
                    <!-- Categories will be added programmatically -->
                </StackPanel>
            </ScrollViewer>

            <!-- Action Buttons -->
            <Grid Grid.Row="4" Margin="0,15,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="10"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Button x:Name="CancelBtn" 
                        Grid.Column="0"
                        Content="❌ Cancelar"
                        Height="45"
                        Background="#30FFFFFF"
                        Foreground="White"
                        FontWeight="SemiBold"
                        FontSize="13"
                        Cursor="Hand"
                        Click="CancelBtn_Click">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="bg" Background="{TemplateBinding Background}" CornerRadius="10" Padding="15,10">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="bg" Property="Background" Value="#40FFFFFF"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>

                <Button x:Name="ConfirmBtn" 
                        Grid.Column="2"
                        Content="✓ Confirmar Selección"
                        Height="45"
                        Background="#8B5CF6"
                        Foreground="White"
                        FontWeight="Bold"
                        FontSize="13"
                        Cursor="Hand"
                        Click="ConfirmBtn_Click">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="bg" Background="{TemplateBinding Background}" CornerRadius="10" Padding="15,10">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="bg" Property="Background" Value="#A78BFA"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </Grid>
        </Grid>
    </Border>
</Window>