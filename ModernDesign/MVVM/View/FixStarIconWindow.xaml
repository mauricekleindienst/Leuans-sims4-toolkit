<Window x:Class="ModernDesign.MVVM.View.FixStarIconWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Fix Star/New Icon" 
        Width="700" Height="550"
        WindowStartupLocation="CenterScreen"
        Background="Transparent"
        AllowsTransparency="True"
        WindowStyle="None"
        ResizeMode="NoResize">

    <Window.Resources>
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Background" Value="#3B82F6"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontFamily" Value="Bahnschrift Light"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}"
                                CornerRadius="6" Padding="12,8">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#2563EB"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Background" Value="#4B5563"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Border Background="#1F2937" CornerRadius="12" BorderBrush="#374151" BorderThickness="1">
        <Border.Effect>
            <DropShadowEffect ShadowDepth="0" Opacity="0.5" BlurRadius="20"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="60"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- HEADER -->
            <Border Grid.Row="0" Background="#111827" CornerRadius="12,12,0,0"
                    MouseLeftButtonDown="Header_MouseLeftButtonDown">
                <Grid Margin="20,0">
                    <StackPanel VerticalAlignment="Center">
                        <TextBlock x:Name="TitleText" Text="⭐ Fix Star/New Icon" 
                                   Foreground="White" FontSize="20"
                                   FontWeight="Bold" FontFamily="Bahnschrift Light"/>
                        <TextBlock x:Name="SubtitleText" 
                                   Text="Remove the permanent 'new' star from build mode items"
                                   Foreground="#9CA3AF" FontSize="12"
                                   FontFamily="Bahnschrift Light"/>
                    </StackPanel>

                    <Button Content="✕" HorizontalAlignment="Right"
                            Width="40" Height="40"
                            Background="Transparent" Foreground="White"
                            BorderThickness="0" FontSize="18"
                            Click="CloseButton_Click" Cursor="Hand"/>
                </Grid>
            </Border>

            <!-- CONTENT -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Hidden" Margin="20">
                <StackPanel>
                    <!-- STATUS -->
                    <Border x:Name="StatusBorder" CornerRadius="8" Padding="15" Margin="0,0,0,15"
                            Background="#111827" BorderBrush="#374151" BorderThickness="1">
                        <StackPanel>
                            <TextBlock x:Name="StatusTitle" Text="📋 Status" 
                                       Foreground="White" FontSize="14"
                                       FontWeight="Bold" FontFamily="Bahnschrift Light"
                                       Margin="0,0,0,8"/>
                            <TextBlock x:Name="StatusText" Text="Checking for ReticulatedSplinesView file..." 
                                       Foreground="#D1D5DB" FontSize="12"
                                       FontFamily="Bahnschrift Light"
                                       TextWrapping="Wrap"/>
                        </StackPanel>
                    </Border>

                    <!-- AUTOMATIC METHOD -->
                    <Border CornerRadius="8" Padding="15" Margin="0,0,0,15"
                            Background="#064E3B" BorderBrush="#10B981" BorderThickness="1">
                        <StackPanel>
                            <TextBlock x:Name="AutoTitle" Text="🤖 Automatic Method (Recommended)" 
                                       Foreground="White" FontSize="14"
                                       FontWeight="Bold" FontFamily="Bahnschrift Light"
                                       Margin="0,0,0,8"/>
                            <TextBlock x:Name="AutoDesc" 
                                       Text="We'll automatically find and patch your ReticulatedSplinesView file."
                                       Foreground="#D1FAE5" FontSize="12"
                                       FontFamily="Bahnschrift Light"
                                       TextWrapping="Wrap" Margin="0,0,0,10"/>

                            <Button x:Name="AutoFixBtn" Content="✨ Auto Fix Now"
                                    Style="{StaticResource ModernButton}"
                                    Background="#22C55E"
                                    Click="AutoFixBtn_Click"/>
                        </StackPanel>
                    </Border>

                    <!-- MANUAL METHOD -->
                    <Border CornerRadius="8" Padding="15" Margin="0,0,0,15"
                            Background="#1E3A8A" BorderBrush="#3B82F6" BorderThickness="1">
                        <StackPanel>
                            <TextBlock x:Name="ManualTitle" Text="🔧 Manual Method (Advanced)" 
                                       Foreground="White" FontSize="14"
                                       FontWeight="Bold" FontFamily="Bahnschrift Light"
                                       Margin="0,0,0,8"/>
                            <TextBlock x:Name="ManualDesc" 
                                       Text="Do it yourself using a hex editor. Follow these steps:"
                                       Foreground="#DBEAFE" FontSize="12"
                                       FontFamily="Bahnschrift Light"
                                       TextWrapping="Wrap" Margin="0,0,0,10"/>

                            <!-- Step 1: Download HxD -->
                            <Border Background="#1E40AF" CornerRadius="6" Padding="10" Margin="0,0,0,8">
                                <StackPanel>
                                    <TextBlock Foreground="#DBEAFE" FontSize="11" FontFamily="Bahnschrift Light" TextWrapping="Wrap" Margin="0,0,0,5">
                                        <Run Text="1. " FontWeight="Bold" Foreground="#60A5FA"/>
                                        <Run x:Name="ManualStep1" Text="Download HxD (free hex editor)"/>
                                    </TextBlock>
                                    <Button x:Name="DownloadHxDBtn" Content="⬇️ Download HxD"
                                            Style="{StaticResource ModernButton}"
                                            Background="#3B82F6"
                                            FontSize="10"
                                            Padding="8,4"
                                            HorizontalAlignment="Left"
                                            Click="DownloadHxDBtn_Click"/>
                                </StackPanel>
                            </Border>

                            <!-- Step 2: Locate file -->
                            <Border Background="#1E40AF" CornerRadius="6" Padding="10" Margin="0,0,0,8">
                                <StackPanel>
                                    <TextBlock Foreground="#DBEAFE" FontSize="11" FontFamily="Bahnschrift Light" TextWrapping="Wrap" Margin="0,0,0,5">
                                        <Run Text="2. " FontWeight="Bold" Foreground="#60A5FA"/>
                                        <Run x:Name="ManualStep2" Text="Locate 'ReticulatedSplinesView' in your Sims 4 documents folder"/>
                                    </TextBlock>
                                    <Button x:Name="OpenFolderBtn" Content="📁 Open Sims 4 Folder"
                                            Style="{StaticResource ModernButton}"
                                            Background="#3B82F6"
                                            FontSize="10"
                                            Padding="8,4"
                                            HorizontalAlignment="Left"
                                            Click="OpenFolderBtn_Click"/>
                                </StackPanel>
                            </Border>

                            <!-- Step 3: Open with HxD -->
                            <Border Background="#1E40AF" CornerRadius="6" Padding="10" Margin="0,0,0,8">
                                <TextBlock Foreground="#DBEAFE" FontSize="11" FontFamily="Bahnschrift Light" TextWrapping="Wrap">
                                    <Run Text="3. " FontWeight="Bold" Foreground="#60A5FA"/>
                                    <Run x:Name="ManualStep3" Text="Right-click the file → Open with → HxD64.exe"/>
                                </TextBlock>
                            </Border>

                            <!-- Step 4: Search and Replace -->
                            <Border Background="#1E40AF" CornerRadius="6" Padding="10" Margin="0,0,0,8">
                                <TextBlock Foreground="#DBEAFE" FontSize="11" FontFamily="Bahnschrift Light" TextWrapping="Wrap">
                                    <Run Text="4. " FontWeight="Bold" Foreground="#60A5FA"/>
                                    <Run x:Name="ManualStep4" Text="Press Ctrl+R → Search for '1D 10 01' → Replace with '1D 10 04' → Datatype: Hex-values → Replace All"/>
                                </TextBlock>
                            </Border>

                            <!-- Step 5: Save -->
                            <Border Background="#1E40AF" CornerRadius="6" Padding="10">
                                <TextBlock Foreground="#DBEAFE" FontSize="11" FontFamily="Bahnschrift Light" TextWrapping="Wrap">
                                    <Run Text="5. " FontWeight="Bold" Foreground="#60A5FA"/>
                                    <Run x:Name="ManualStep5" Text="Save the file (Ctrl+S) and restart your game"/>
                                </TextBlock>
                            </Border>
                        </StackPanel>
                    </Border>

                    <!-- INSTRUCTIONS -->
                    <Border CornerRadius="8" Padding="15"
                            Background="#111827" BorderBrush="#374151" BorderThickness="1">
                        <StackPanel>
                            <TextBlock x:Name="InstructionsTitle" Text="📖 How it works" 
                                       Foreground="White" FontSize="14"
                                       FontWeight="Bold" FontFamily="Bahnschrift Light"
                                       Margin="0,0,0,8"/>

                            <TextBlock x:Name="Step1Text" 
                                       Foreground="#D1D5DB" FontSize="11"
                                       FontFamily="Bahnschrift Light"
                                       TextWrapping="Wrap" Margin="0,0,0,5">
                                <Run Text="1. " FontWeight="Bold" Foreground="#22C55E"/>
                                <Run Text="Locate your 'ReticulatedSplinesView' file in your 'The Sims 4' folder"/>
                            </TextBlock>

                            <TextBlock x:Name="Step2Text" 
                                       Foreground="#D1D5DB" FontSize="11"
                                       FontFamily="Bahnschrift Light"
                                       TextWrapping="Wrap" Margin="0,0,0,5">
                                <Run Text="2. " FontWeight="Bold" Foreground="#22C55E"/>
                                <Run Text="We'll patch the file by replacing hex values '1D 10 01' with '1D 10 04'"/>
                            </TextBlock>

                            <TextBlock x:Name="Step3Text" 
                                       Foreground="#D1D5DB" FontSize="11"
                                       FontFamily="Bahnschrift Light"
                                       TextWrapping="Wrap" Margin="0,0,0,5">
                                <Run Text="3. " FontWeight="Bold" Foreground="#22C55E"/>
                                <Run Text="Save the file and restart your game"/>
                            </TextBlock>

                            <TextBlock x:Name="Step4Text" 
                                       Foreground="#D1D5DB" FontSize="11"
                                       FontFamily="Bahnschrift Light"
                                       TextWrapping="Wrap">
                                <Run Text="4. " FontWeight="Bold" Foreground="#22C55E"/>
                                <Run Text="The 'new' star highlighting should be gone!"/>
                            </TextBlock>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </ScrollViewer>

            <!-- FOOTER -->
            <Border Grid.Row="2" Background="#1F2937" Padding="20,15" CornerRadius="0,0,12,12">
                <Button x:Name="CloseBtn" Content="Close"
                        Style="{StaticResource ModernButton}"
                        Background="#4B5563"
                        HorizontalAlignment="Right"
                        Click="CloseButton_Click"/>
            </Border>
        </Grid>
    </Border>
</Window>
